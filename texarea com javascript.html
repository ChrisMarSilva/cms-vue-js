

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Hello, world!</title>
  </head>

  <body>

    <div class="container">

      <div class="mb-3">
        <label for="TxtTexto" class="form-label">Texto</label>
        <!--  <textarea maxlength="50" onkeyup="MudarCorTxtTexto();" id="TxtTexto" class="form-control" rows="5"></textarea> -->
        <!-- <textarea maxlength="50" oninput="MudarCorTxtTexto();" id="TxtTexto" class="form-control" rows="5" style="color:transparent; caret-color: black;  font-style: normal; font-variant: normal;  font-size:13.3px; padding:2px; font-family:monospace;"></textarea> -->
        <div id="TxtTexto" oninput="MudarCorTxtTexto();" contenteditable="true" class="form-control" style=" width: 500px; min-height: 100px; border: 2px solid;"></div>
      </div>

      <div class="mb-3">
        <label for="TxtParte1" class="form-label">PARTE #1</label>
        <textarea disabled id="TxtParte1" class="form-control" rows="3"></textarea>
      </div>

      <div class="mb-3">
        <label for="TxtParte2" class="form-label">PARTE #1</label>
        <textarea disabled id="TxtParte2" class="form-control" rows="3"></textarea>
      </div>

      <div class="mb-3">
        <label for="TxtParte3" class="form-label">PARTE #3</label>
        <textarea disabled id="TxtParte3" class="form-control" rows="3"></textarea>
      </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  </body>
</html>


$(document).ready(function() { 
  // $('#TxtTexto').val("Chris"); 
  // $('#TxtTexto').text("<div class='text-danger'>Chris</div>");
  // $('#TxtTexto').html("<span class='text-danger'>Chris</span> <span class='text-primary'>MarSil</span>");
  $('#TxtTexto').html(""); // 333333333322222222221111111111 
});


$('#TxtTexto').keyup(function(e){ check_charcount(e); });
$('#TxtTexto').keydown(function(e){ check_charcount(e); });
function check_charcount(e){   
  let sText    = $('#TxtTexto').text();
  let iTextLen = sText.length;
  //   console.log("check.sText: "    + sText);
  //   console.log("check.iTextLen: " + iTextLen.toString());
  if(e.which != 8 && iTextLen >= 30) {
    e.preventDefault();
  }
}


function MudarCorTxtTexto() {
  
  $('#TxtParte1').html("");
  $('#TxtParte2').html("");
  $('#TxtParte3').html("");

  let sVal     = $('#TxtTexto').val();
  let sText    = $('#TxtTexto').text();
  let iTextLen = sText.length;
  let sHtml    = ""; // $('#TxtTexto').html();

  console.clear();
  //console.log("sVal: "     + sVal);
  console.log("Mudar.sText: "    + sText);
  console.log("Mudar.iTextLen: " + iTextLen.toString());
  // console.log("Mudar.sHtml: "    + sHtml);

  sHtml += "<span>";

  let sParte1 = sText.substr(0, 10);
  sHtml += "<span class='text-primary'>";
  sHtml += sParte1; 
  sHtml += "</span>";
  $('#TxtParte1').html(sParte1);

  if (iTextLen > 10){
    let sParte2 = sText.substr(10, 10);
    sHtml += "<span class='text-danger'>";
    sHtml += sParte2; 
    sHtml += "</span>";
    $('#TxtParte2').html(sParte2);
  } 

  if (iTextLen > 20){
    let sParte3 = sText.substr(20, 10);
    sHtml += "<span class='text-success'>";
    sHtml += sParte3; 
    sHtml += "</span>";
    $('#TxtParte3').html(sParte3);
  } 

  sHtml += "</span>";

  console.log("Mudar.sHtml: "    + sHtml);

  // $('#TxtTexto').val(sVal); 
  // $('#TxtTexto').text(sHtml); 
  $('#TxtTexto').html(sHtml);

}



//   var lt='&lt;';
//   var gt='&gt;';
//   var text = '<div class="item"><a class="as">q</a>test</div>';
//   text = text.replace(/</gi, lt);
//   text = text.replace(/>/gi, gt);
//   $('#TxtTexto').append(text);